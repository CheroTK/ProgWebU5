{% extends "base.html" %}
{% block title %}Mis Compras{% endblock %}
{% block content %}
<h2>Mis Compras</h2>
{% if compras %}
    <div class="accordion" id="comprasAccordion">
        {% for compra in compras %}
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading{{ loop.index }}">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}">
                    Venta #{{ compra.id }} - {{ compra.fecha }} - Total: ${{ compra.total }}
                </button>
            </h2>
            <div id="collapse{{ loop.index }}" class="accordion-collapse collapse" data-bs-parent="#comprasAccordion">
                <div class="accordion-body">
                    <ul>
                        {% for detalle in compra.detalles %}
                        <li>
                            {{ detalle[0] }} — Cantidad: {{ detalle[1] }} — Precio unitario: ${{ detalle[2] }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <p>No has realizado compras aún.</p>
{% endif %}
{% endblock %}
